<!DOCTYPE HTML>
<html>
<head>
    <title>Graph2D | Performance</title>

    <style>
        body, html {
            font-family: arial, sans-serif;
            font-size: 11pt;
        }
    </style>

    <!-- note: moment.js must be loaded before vis.js, else vis.js uses its embedded version of moment.js -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.3.1/moment.min.js"></script>

    <script src="../../dist/vis.js"></script>
    <link href="../../dist/vis.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h2>Graph2D | Performance</h2>
<div style="width:700px; font-size:14px; text-align: justify;">
    This example is a test of the performance of the Graph2D. Select the amount of datapoints you want to plot and press draw.
    You can choose between the style of the points as well as the interpolation method. This can only be toggled with the buttons.
</div>
<br />
<p>
    <label for="count">Number of items</label>
    <input id="count" value="100">
    <input id="toggleInterpolation" type="button" value="toggle Interpolation">
    Interpolation method: <input id="interpolation" value="linear">
    <input id="togglePoints" type="button" value="toggle Points">
    Points style: <input id="points" value="none"> <br/>
    <input id="draw" type="button" value="draw" style="width:200px;">
</p>
<div id="visualization"></div>

<script>
    var points = 'none';
    var interpolation = 'linear';

    function togglePoints() {
        var pointsOptions = {};
        var pointsField = document.getElementById("points");
        if (points == "none") {
            points = 'circle';
            pointsOptions = {drawPoints: {style: points}};
        }
        else if (points == "circle") {
            points = 'square';
            pointsOptions = {drawPoints: {style: points}};
        }
        else if (points == "square") {
            points = 'none';
            pointsOptions = {drawPoints: false};
        }
        pointsField.value = points;

        graph2D.setOptions(pointsOptions);
    }

    function toggleInterpolation() {
        var interpolationOptions = {};
        var interpolationField = document.getElementById("interpolation");
        if (interpolation == "linear") {
            interpolation = 'centripetal';
            interpolationOptions = {catmullRom: {parametrization: interpolation}};
        }
        else if (interpolation == "centripetal") {
            interpolation = 'chordal';
            interpolationOptions = {catmullRom: {parametrization: interpolation}};
        }
        else if (interpolation == "chordal") {
            interpolation = 'uniform';
            interpolationOptions = {catmullRom: {parametrization: interpolation}};
        }
        else if (interpolation == "uniform") {
            interpolation = 'linear';
            interpolationOptions = {catmullRom: false};
        }
        interpolationField.value = interpolation;
        graph2D.setOptions(interpolationOptions);
    }


    // create a dataset with items
    var now = moment().minutes(0).seconds(0).milliseconds(0);
    var dataset = new vis.DataSet({
        type: {start: 'ISODate', end: 'ISODate' }
    });

    var startPoint = now;
    var endPoint = now.clone().add('days', 100);

    // create data
    function createData() {
        var count = parseInt(document.getElementById('count').value) || 100;
        var newData = [];
        for (var i = 0; i < count; i++) {
            newData.push({id: i, x: now.clone().add('days', i), y: Math.sin(0.1 * 3.14159654 * i)});
        }
        dataset.clear();
        dataset.add(newData);
    }
    createData();

    document.getElementById('draw').onclick = createData;
    document.getElementById('toggleInterpolation').onclick = toggleInterpolation;
    document.getElementById('togglePoints').onclick = togglePoints;

    var container = document.getElementById('visualization');
    var options = {
        drawPoints: false,
        catmullRom: false,
        start: startPoint,
        end: endPoint
    };

    var graph2D = new vis.Graph2d(container, dataset, options);
</script>
</body>
</html>